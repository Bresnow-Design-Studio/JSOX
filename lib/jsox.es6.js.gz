var e=e||{};const t=JSON,n=e;function r(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}n.version="1.2.105",function(){const e="function"==typeof BigInt,r=13,s=["ab","u8","cu8","s8","u16","s16","u32","s32","u64","s64","f32","f64"];var a=null,i=null;const o=[ArrayBuffer,Uint8Array,Uint8ClampedArray,Int8Array,Uint16Array,Int16Array,Uint32Array,Int32Array,null,null,Float32Array,Float64Array],l=29,c=30,u=31,f={true:!0,false:!1,null:null,NaN:NaN,Infinity:1/0,undefined:void 0},p=[];function g(){var e=p.pop();return e||(e={context:0,current_proto:null,current_class:null,current_class_field:0,arrayType:-1,valueType:0,elements:null}),e}function h(e){p.push(e)}const b=[];function y(e){b.push(e)}n.escape=function(e){var t,n="";if(!e)return e;for(t=0;t<e.length;t++)'"'!=e[t]&&"\\"!=e[t]&&"`"!=e[t]&&"'"!=e[t]||(n+="\\"),n+=e[t];return n};const d=new WeakMap,m=new Map,v=new Map,k=[];n.begin=function(t,n){const a={name:null,value_type:0,string:"",contains:null,className:null},i={line:1,col:1};let f,p=0;var d=new Map,m=0,k=!0,w=!1,_=!1,x=null,O=null,N=void 0,j={first:null,last:null,saved:null,push(e){var t=this.saved;t?(this.saved=t.next,t.node=e,t.next=null,t.prior=this.last):t={node:e,next:null,prior:this.last},this.last?this.last.next=t:this.first=t,this.last=t,this.length++},pop(){var e=this.last;return(this.last=e.prior)||(this.first=null),e.next=this.saved,this.last&&(this.last.next=null),e.next||(e.first=null),this.saved=e,this.length--,e.node},length:0},S=[],A={},I=null,T=null,D=0,P=-1,C=0,M=0,X=!1,J=!1,F=!1,U=!1,$=!1,B={first:null,last:null,saved:null,push(e){var t=this.saved;t?(this.saved=t.next,t.node=e,t.next=null,t.prior=this.last):t={node:e,next:null,prior:this.last},this.last?this.last.next=t:this.first=t,this.last=t},shift(){var e=this.first;return e?((this.first=e.next)||(this.last=null),e.next=this.saved,this.saved=e,e.node):null},unshift(e){var t=this.saved;this.saved=t.next,t.node=e,t.next=this.first,t.prior=null,this.first||(this.last=t),this.first=t}},q=null,z=!1,H=!1,L=!1,R=!1,W=!1,Y=!1,G=!1,V=0,K=0,Q=!1,Z=!1,ee=!1;function te(e){throw new Error(`${e} at ${p} [${i.line}:${i.col}]`)}return{fromJSOX(e,t,n){if(d.get(e))throw new Error("Existing fromJSOX has been registered for prototype");if(t||(t=function(){}),t&&!("constructor"in t))throw new Error("Please pass a prototype like thing...");d.set(e,{protoCon:t.prototype.constructor,cb:n})},registerFromJSOX(e,t){throw new Error("registerFromJSOX is deprecated, please update to use fromJSOX instead:"+e+t.toString())},finalError(){0!==M&&(1===M&&te("Comment began at end of document"),3===M&&te("Open comment '/*' is missing close at end of document"),4===M&&te("Incomplete '/* *' close at end of document")),z&&te("Incomplete string")},value(){this.finalError();var e=x;return x=void 0,e},reset(){m=0,k=!0,B.last&&(B.last.next=B.save),B.save=B.first,B.first=B.last=null,j.last&&(j.last.next=j.save),j.length=0,j.save=B.first,j.first=j.last=null,N=void 0,C=0,S=[],A={},I=null,T=null,D=0,a.value_type=0,a.name=null,a.string="",a.className=null,i.line=1,i.col=1,_=!1,M=0,Q=!1,z=!1,L=!1,R=!1,Z=!1},usePrototype(e,t){A[e]=t},write(e){var r;if("string"!=typeof e&&void 0!==e&&(e=String(e)),!k)throw new Error("Parser is still in an error state, please reset before resuming");for(r=this._write(e,!1);r>0&&("function"==typeof n&&function e(t,r){var s,a,i=t[r];if(i&&"object"==typeof i)for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(void 0!==(a=e(i,s))?i[s]=a:delete i[s]);return n.call(t,r,i)}({"":x},""),x=t(x),!(r<2));r=this._write());},_write(t,n){var A,te,ne,re=0;function se(e,t){throw new Error(`${e} '${String.fromCodePoint(t)}' unexpected at ${p} (near '${ne.substr(p>4?p-4:0,p>4?3:p-1)}[${String.fromCodePoint(t)}]${ne.substr(p,10)}') [${i.line}:${i.col}]`)}function ae(){a.value_type=0,a.string="",a.contains=null}function ie(){var t=null;switch(a.value_type){case 5:if(!(a.string.length>13||13==a.string.length&&a[0]>"2")||Z||$||U||J||(ee=!0),ee){if(e)return BigInt(a.string);throw new Error("no builtin BigInt()",0)}if(Z){const e=new Date(a.string);return isNaN(e.getTime())&&se("Bad number format",A),e}return(_?-1:1)*Number(a.string);case 4:if(a.className){if((t=d.get(a.className))||(t=v.get(a.className)),t&&t.cb)return a.className=null,t.cb.call(a.string);throw new Error("Double string error, no constructor for: new "+a.className+"("+a.string+")")}return a.string;case 2:return!0;case 3:return!1;case 7:case 8:return NaN;case 9:return-1/0;case 10:return 1/0;case 1:return null;case-1:case 12:return;case 6:return a.className&&((t=d.get(a.className))||(t=v.get(a.className)),a.className=null,t&&t.cb)?a.contains=t.cb.call(a.contains):a.contains;case r:if(P>=0){let e;return e=a.contains.length?E(a.contains[0]):E(a.string),0===P?e:new o[P](e)}if(-2===P){var n=O;let e;for(e=0;e<a.contains.length;e++){const t=a.contains[e];let s=n[t];if(!s){let t=j.first,i=0;for(;t&&i<a.contains.length&&i<j.length;){const o=a.contains[i];if(t.next)if("number"==typeof o){const e=t.next.node.elements,r=t.next.node.elements;if(e&&o>=e.length){if(i===r.length-1){s=N;break}if(t.next.next&&o===e.length){s=t.next.next.node.elements,t=t.next,i++,n=s;continue}s=N;break}}else{if(o!==t.next.node.name){s=t.next.node.elements[o],e=i;break}s=t.next.node.valueType===r?t.next.node.elements_array:t.next.node.elements[o]}else s=s[o];t=t.next,i++}e=i}if(!s)throw new Error("Path did not resolve poperly."+a.contains+" at "+t+"("+e+")");n=s}return P=-3,n}return a.className&&((t=d.get(a.className))||(t=v.get(a.className)),a.className=null,t&&t.cb)?t.cb.call(a.contains):a.contains;default:console.log("Unhandled value conversion.",a)}}function oe(){if(-3==P)return 6===a.value_type&&N.push(a.contains),void(P=-1);switch(a.value_type){case 12:N.push(void 0),delete N[N.length-1];break;default:N.push(ie())}ae()}function le(){if(-3===P&&a.value_type===r)return ae(),void(P=-1);if(12===a.value_type)return;!a.name&&T&&(a.name=T.fields[D++]);let e=ie();I&&I.protoDef&&I.protoDef.cb?(e=I.protoDef.cb.call(N,a.name,e),e&&(N[a.name]=e)):N[a.name]=e,ae()}function ce(e){if(0!==m){switch(_&&se("Negative outside of quotes, being converted to a string (would lose count of leading '-' characters)",e),m){case u:switch(a.value_type){case 2:a.string+="true";break;case 3:a.string+="false";break;case 1:a.string+="null";break;case 10:a.string+="Infinity";break;case 9:a.string+="-Infinity",se("Negative outside of quotes, being converted to a string",e);break;case 8:a.string+="NaN";break;case 7:a.string+="-NaN",se("Negative outside of quotes, being converted to a string",e);break;case-1:a.string+="undefined";break;case 4:case 0:break;default:console.log("Value of type "+a.value_type+" is not restored...")}break;case 1:a.string+="t";break;case 2:a.string+="tr";break;case 3:a.string+="tru";break;case 5:a.string+="f";break;case 6:a.string+="fa";break;case 7:a.string+="fal";break;case 8:a.string+="fals";break;case 9:a.string+="n";break;case 10:a.string+="nu";break;case 11:a.string+="nul";break;case 12:a.string+="u";break;case 13:a.string+="un";break;case 14:a.string+="und";break;case 15:a.string+="unde";break;case 16:a.string+="undef";break;case 17:a.string+="undefi";break;case 18:a.string+="undefin";break;case 19:a.string+="undefine";break;case 20:a.string+="M";break;case 21:a.string+="Na";break;case 22:a.string+="I";break;case 23:a.string+="In";break;case 24:a.string+="Inf";break;case 25:a.string+="Infi";break;case 26:a.string+="Infin";break;case 27:a.string+="Infini";break;case 28:a.string+="Infinit";break;case 0:case l:case c:break;case 32:se("String-keyword recovery fail (after whitespace)",e)}a.value_type=4,m<l&&(m=u)}else m=u,a.value_type=4;if(123==e)pe();else if(91==e)ge();else if(44==e);else{if(32==e||13==e||10==e||9==e||65279==e||8232==e||8233==e)return;44==e||125==e||93==e||58==e?se("Invalid character near identifier",e):a.string+=f}}function ue(e){let t=0;for(;0==t&&p<ne.length;){f=ne.charAt(p);let n=ne.codePointAt(p++);if(n>=65536&&(f+=ne.charAt(p),p++),i.col++,n==e)L?(G?se("Incomplete hexidecimal sequence",n):Y?se("Incomplete long unicode sequence",n):W&&se("Incomplete unicode sequence",n),R?(R=!1,t=1):a.string+=f,L=!1):t=1;else if(L){if(W){if(125==n){a.string+=String.fromCodePoint(V),W=!1,Y=!1,L=!1;continue}if(V*=16,n>=48&&n<=57)V+=n-48;else if(n>=65&&n<=70)V+=n-65+10;else{if(!(n>=97&&n<=102)){se("(escaped character, parsing hex of \\u)",n),t=-1,W=!1,L=!1;continue}V+=n-97+10}continue}if(G||Y){if(0===K&&123===n){W=!0;continue}if(K<2||Y&&K<4){if(V*=16,n>=48&&n<=57)V+=n-48;else if(n>=65&&n<=70)V+=n-65+10;else{if(!(n>=97&&n<=102)){se(Y?"(escaped character, parsing hex of \\u)":"(escaped character, parsing hex of \\x)",n),t=-1,G=!1,L=!1;continue}V+=n-97+10}K++,Y?4==K&&(a.string+=String.fromCodePoint(V),Y=!1,L=!1):2==K&&(a.string+=String.fromCodePoint(V),G=!1,L=!1);continue}}switch(n){case 13:R=!0,i.col=1;continue;case 8232:case 8233:i.col=1;case 10:R?R=!1:i.col=1,i.line++;break;case 116:a.string+="\t";break;case 98:a.string+="\b";break;case 110:a.string+="\n";break;case 114:a.string+="\r";break;case 102:a.string+="\f";break;case 48:a.string+="\0";break;case 120:G=!0,K=0,V=0;continue;case 117:Y=!0,K=0,V=0;continue;default:a.string+=f}L=!1}else 92===n?L?(a.string+="\\",L=!1):(L=!0,V=0,K=0):(R&&(R=!1,i.line++,i.col=2),a.string+=f)}return t}function fe(){let e;for(;(e=p)<ne.length;){f=ne.charAt(e);let t=ne.codePointAt(p++);if(t>=256){p=e;break}if(95!=t)if(i.col++,t>=48&&t<=57)F&&($=!0),a.string+=f;else if(45==t||43==t)0==a.string.length||F&&!U&&!$?(45!=t||F||(_=!_),a.string+=f,U=!0):(a.string+=f,Z=!0);else{if(78==t){if(0==m)return H=!1,void(m=20);se("fault while parsing number;",t);break}if(73==t){if(0==m)return H=!1,void(m=22);se("fault while parsing number;",t);break}if(58==t&&Z)a.string+=f,Z=!0;else if(84==t&&Z)a.string+=f,Z=!0;else if(90==t&&Z)a.string+=f,Z=!0;else if(46==t){if(J||X||F){k=!1,se("fault while parsing number;",t);break}a.string+=f,J=!0}else{if(110==t){ee=!0;break}if(120==t||98==t||111==t||88==t||66==t||79==t){if(X||"0"!=a.string){k=!1,se("fault while parsing number;",t);break}X=!0,a.string+=f}else{if(101!=t&&69!=t){if(32==t||13==t||10==t||9==t||47==t||35==t||44==t||125==t||93==t||123==t||91==t||34==t||39==t||96==t||58==t){p=e;break}n&&(k=!1,se("fault while parsing number;",t));break}if(F){k=!1,se("fault while parsing number;",t);break}a.string+=f,F=!0}}}}n||p!=ne.length?(H=!1,a.value_type=5,0==C&&(Q=!0)):H=!0}function pe(){let e,t=2,n=null,r={};if(m>0&&m<l&&ce(123),e=he(),0==C)if(m==l||m==u&&(e||a.string.length)){if(e&&e.protoDef&&e.protoDef.protoCon&&(r=new e.protoDef.protoCon),!e||!e.protoDef&&a.string){if(n=S.find((e=>e.name===a.string)),console.log("Probably creating the Macro-Tag here?",n),n)w?(n.fields.length=0,t=4):(r=new n.protoCon,t=5);else{function s(){}S.push(n={name:a.string,protoCon:e&&e.protoDef&&e.protoDef.protoCon||s.constructor,fields:[]}),t=4}w=!1}T=n,m=0}else m=l;else if(m==l||1===C||3===C||5==C)if(0!=m||4==a.value_type){if(e&&e.protoDef)a.className=a.string,r=new e.protoDef.protoCon;else if(n=S.find((e=>e.name===a.string)),n)t=5,r={};else{function s(){}d.set(a.string,{protoCon:s.prototype.constructor,cb:null}),r=new s}m=0}else m=0;else if(2==C&&0==m)return se("fault while parsing; getting field name unexpected ",A),k=!1,!1;let i=g();return a.value_type=6,0===C?N=r:1==C||3!=C&&5!=C||(!a.name&&T&&(a.name=T.fields[D++]),N[a.name]=r),i.context=C,i.elements=N,i.name=a.name,i.current_proto=I,i.current_class=T,i.current_class_field=D,i.valueType=a.value_type,i.arrayType=-1==P?-3:P,i.className=a.className,a.className=null,a.name=null,I=e,T=n,D=0,N=r,O||(O=N),j.push(i),ae(),C=t,!0}function ge(){if(m>0&&m<l&&ce(91),m==u&&a.string.length){var e=s.findIndex((e=>e===a.string));e>=0?(m=0,P=e,a.className=a.string,a.string=null):"ref"===a.string?(a.className=null,P=-2):d.get(a.string)||v.get(a.string)?a.className=a.string:se(`Unknown type '${a.string}' specified for array`,A)}else if(2==C||m==l||m==c)return se("Fault while parsing; while getting field name unexpected",A),k=!1,!1;{let e=g();a.value_type=r;let t=[];0==C?N=t:1==C?-1==P&&N.push(t):3==C&&(a.name||(console.log("This says it's resolved......."),P=-3),I&&I.protoDef&&I.protoDef.cb&&(t=I.protoDef.cb.call(N,a.name,t)),t&&(N[a.name]=t)),e.context=C,e.elements=N,e.name=a.name,e.current_proto=I,e.current_class=T,e.current_class_field=D,e.valueType=a.value_type,e.arrayType=-1==P?-3:P,e.className=a.className,P=-1,a.className=null,a.name=null,I=null,T=null,D=0,N=t,O||(O=t),j.push(e),ae(),C=1}return!0}function he(){const e={protoDef:null,cls:null};return((e.protoDef=d.get(a.string))||(e.protoDef=v.get(a.string)))&&(a.className||(a.className=a.string,a.string=null)),a.string&&(e.cls=S.find((e=>e.name===a.string))),e.protoDef||e.cls?e:null}if(!k)return-1;for(t&&t.length?((te=function(){var e=b.pop();return e?e.n=0:e={buf:null,n:0},e}()).buf=t,B.push(te)):(H&&(H=!1,a.value_type=5,0==C&&(Q=!0),re=1),0!==C&&se("Unclosed object at end of stream.",A));k&&(te=B.shift());){if(p=te.n,ne=te.buf,z){let e=ue(q);e<0?k=!1:e>0&&(z=!1,k&&(a.value_type=4))}for(H&&fe();!Q&&k&&p<ne.length;)if(f=ne.charAt(p),(A=ne.codePointAt(p++))>=65536&&(f+=ne.charAt(p),p++),i.col++,M)if(1==M)if(42==A)M=3;else{if(47!=A)return se("fault while parsing;",A);M=2}else 2==M?10!=A&&13!=A||(M=0):3==M?42==A&&(M=4):M=47==A?0:3;else{switch(A){case 47:M=1;break;case 123:pe();break;case 91:ge();break;case 58:if(5==C)m=0,a.name=a.string,a.string="",a.value_type=0;else if(2==C||4==C)if(4==C){if(!Object.keys(N).length){console.log("This is a full object, not a class def...",a.className);const e=()=>{};d.set(j.last.node.current_class.name,{protoCon:e.prototype.constructor,cb:null}),N=new e,C=3,a.name=a.string,m=0,a.string="",a.value_type=0,console.log("don't do default;s do a revive...")}}else 0!=m&&m!=u&&m!=l&&m!=c&&ce(32),m=0,a.name=a.string,a.string="",C=2===C?3:6,a.value_type=0;else{if(0==C){console.log("Override colon found, allow class redefinition",C),w=!0;break}se(1==C?"(in array, got colon out of string):parsing fault;":3==C?"String unexpected":"(outside any object, got colon out of string):parsing fault;",A),k=!1}break;case 125:if(m==u&&(m=0),4==C)if(T){a.string&&T.fields.push(a.string),ae();let e=j.pop();C=0,m=0,a.name=e.name,N=e.elements,T=e.current_class,D=e.current_class_field,P=e.arrayType,a.value_type=e.valueType,a.className=e.className,O=null,h(e)}else se("State error; gathering class fields, and lost the class",A);else if(2==C||5==C){0!=a.value_type&&(T&&(a.name=T.fields[D++]),le()),a.value_type=6,I&&I.protoDef&&(console.log("SOMETHING SHOULD AHVE BEEN REPLACED HERE??",I),console.log("The other version only revives on init"),N=new I.protoDef.cb(N,void 0,void 0)),a.contains=N,a.string="";let e=j.pop();C=e.context,a.name=e.name,N=e.elements,T=e.current_class,I=e.current_proto,D=e.current_class_field,P=e.arrayType,a.value_type=e.valueType,a.className=e.className,h(e),0==C&&(Q=!0)}else if(3==C){0===a.value_type&&se("Fault while parsing; unexpected",A),le(),a.value_type=6,a.contains=N,m=0;var be=j.pop();C=be.context,a.name=be.name,N=be.elements,I=be.current_proto,T=be.current_class,D=be.current_class_field,P=be.arrayType,a.value_type=be.valueType,a.className=be.className,h(be),0==C&&(Q=!0)}else se("Fault while parsing; unexpected",A),k=!1;_=!1;break;case 93:if(m>=c&&(m=0),1==C){0!=a.value_type&&(a.name&&console.log("Ya this should blow up"),oe()),a.contains=N;{let e=j.pop();a.name=e.name,a.className=e.className,C=e.context,N=e.elements,I=e.current_proto,T=e.current_class,D=e.current_class_field,P=e.arrayType,a.value_type=e.valueType,h(e)}a.value_type=r,0==C&&(Q=!0)}else se(`bad context ${C}; fault while parsing`,A),k=!1;_=!1;break;case 44:m<c&&0!=m&&ce(A),m!=u&&m!=l||(m=0),4==C?T?(console.log("Saving field name(set word to IS A FIELD):",a.string),T.fields.push(a.string),a.string="",m=l):se("State error; gathering class fields, and lost the class",A):2==C?T?(a.name=T.fields[D++],0!=a.value_type&&(le(),ae())):(a.string||a.value_type)&&se("State error; comma in field name and/or lost the class",A):5==C?(T?(-3==P||a.name||(a.name=T.fields[D++]),0!=a.value_type&&(-3!=P&&le(),ae())):0!=a.value_type&&(le(),ae()),a.name=null):1==C?(0==a.value_type&&(a.value_type=12),oe(),ae(),m=0):3==C&&0!=a.value_type?(C=2,0!=a.value_type&&(le(),ae()),m=0):(k=!1,se("bad context; excessive commas while parsing;",A)),_=!1;break;default:switch(A){default:if(0!=C&&(3!=C||m!=l)&&2!=C&&m!=l&&4!=C){if(0==m&&(A>=48&&A<=57||43==A||46==A||45==A))X=!1,F=!1,Z=!1,ee=!1,U=!1,$=!1,J=!1,a.string=f,te.n=p,fe();else if(0==a.value_type)0!=m?ce(A):(m=u,a.string+=f,a.value_type=4);else if(2==C)se("Multiple values found in field name",A);else if(3==C)if(4!=a.value_type&&(6!=a.value_type&&a.value_type!=r||se("String unexpected",A),ce(A)),m==c){he()?a.string=f:se("String unexpected",A)}else m==u?a.string+=f:se("String unexpected",A);else if(1==C){if(m==c){a.className||(a.className=a.string,a.string=""),a.string+=f;break}m==u&&(a.string+=f)}break}switch(A){case 96:case 34:case 39:if(0==m||m==l){a.string.length&&(console.log("IN ARRAY AND FIXING?"),a.className=a.string,a.string=""),ue(A)?a.value_type=4:(q=A,z=!0)}else se("fault while parsing; quote not at start of field name",A);break;case 10:i.line++,i.col=1;case 13:case 32:case 8232:case 8233:case 9:case 65279:if(0===C&&m===u){m=0,0===C&&(Q=!0);break}if(0===m||m===c){0==C&&a.value_type&&(Q=!0);break}if(m===l){if(0===C){m=0,Q=!0;break}a.string.length&&console.log("STEP TO NEXT TOKEN."),m=c}else k=!1,se("fault while parsing; whitepsace unexpected",A);break;default:if(0==m&&(A>=48&&A<=57||43==A||46==A||45==A)){X=!1,F=!1,Z=!1,ee=!1,U=!1,$=!1,J=!1,a.string=f,te.n=p,fe();break}if(m===c&&(k=!1,se("fault while parsing; character unexpected",A)),0===m){m=l,a.value_type=4,a.string+=f;break}if(0==a.value_type)0!==m&&m!==u&&ce(A);else{if(m===u||m===l){a.string+=f;break}if(2==C){if(m==l){a.string+=f;break}se("Multiple values found in field name",A)}3==C&&se("String unexpected",A)}}break;case 96:case 34:case 39:ue(A)?(a.value_type=4,m=u):(q=A,z=!0);break;case 10:i.line++,i.col=1;case 32:case 9:case 13:case 8232:case 8233:case 65279:if(m==u){if(0==C){m=0,Q=!0;break}if(3==C){m=32;break}if(2==C){m=c;break}if(1==C){m=c;break}}if(0==m||m==c)break;m==l?a.string.length&&(m=c):m<u&&ce(A);break;case 116:0==m?m=1:27==m?m=28:ce(A);break;case 114:1==m?m=2:ce(A);break;case 117:2==m?m=3:9==m?m=10:0==m?m=12:ce(A);break;case 101:3==m?(a.value_type=2,m=u):8==m?(a.value_type=3,m=u):14==m?m=15:18==m?m=19:ce(A);break;case 110:0==m?m=9:12==m?m=13:17==m?m=18:22==m?m=23:25==m?m=26:ce(A);break;case 100:13==m?m=14:19==m?(a.value_type=-1,m=u):ce(A);break;case 105:16==m?m=17:24==m?m=25:26==m?m=27:ce(A);break;case 108:10==m?m=11:11==m?(a.value_type=1,m=u):6==m?m=7:ce(A);break;case 102:0==m?m=5:15==m?m=16:23==m?m=24:ce(A);break;case 97:5==m?m=6:20==m?m=21:ce(A);break;case 115:7==m?m=8:ce(A);break;case 73:0==m?m=22:ce(A);break;case 78:0==m?m=20:21==m?(a.value_type=_?7:8,_=!1,m=u):ce(A);break;case 121:28==m?(a.value_type=_?9:10,_=!1,m=u):ce(A);break;case 45:0==m?_=!_:ce(A);break;case 43:0!==m&&ce(A)}}if(Q){m==u&&(m=0);break}}if(p==ne.length?(y(te),z||H||2==C?re=0:0!=C||0==a.value_type&&!x||(Q=!0,re=1)):(te.n=p,B.unshift(te),re=2),Q){O=null;break}}return k?(Q&&0!=a.value_type&&(m=0,x=ie(),_=!1,a.string="",a.value_type=0),Q=!1,re):-1}}};const w=[Object.freeze(n.begin())];var _=0;function x(){return this&&this.valueOf()}n.parse=function(e,t){var r,s=_++;w.length<=s&&w.push(Object.freeze(n.begin())),r=w[s],"string"!=typeof e&&(e=String(e)),r.reset();const a=r._write(e,!0);if(a>0){var i=r.value();if(void 0===i&&a>1)throw new Error("Pending value could not complete");return i="function"==typeof t?function e(n,r){var s,a,i=n[r];if(i&&"object"==typeof i)for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(void 0!==(a=e(i,s))?i[s]=a:delete i[s]);return t.call(n,r,i)}({"":i},""):i,_--,i}r.finalError()},d.set(Object.prototype,{external:!1,name:Object.prototype.constructor.name,cb:null}),d.set(Date.prototype,{external:!1,name:"Date",cb:function(){var e,t,n=-this.getTimezoneOffset(),r=n>=0?"+":"-",s=function(e){var t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return[this.getFullYear(),"-",s(this.getMonth()+1),"-",s(this.getDate()),"T",s(this.getHours()),":",s(this.getMinutes()),":",s(this.getSeconds()),"."+(e=this.getMilliseconds(),t=Math.floor(Math.abs(e)),(t<100?"0":"")+(t<10?"0":"")+t)+r,s(n/60),":",s(n%60)].join("")}}),d.set(Boolean.prototype,{external:!1,name:"Boolean",cb:x}),d.set(Number.prototype,{external:!1,name:"Number",cb:function(){return isNaN(this)?"NaN":isFinite(this)?String(this):this<0?"-Infinity":"Infinity"}}),d.set(String.prototype,{external:!1,name:"String",cb:function(){return'"'+n.escape(x.apply(this))+'"'}}),"function"==typeof BigInt&&d.set(BigInt.prototype,{external:!1,name:"BigInt",cb:function(){return this+"n"}}),d.set(ArrayBuffer.prototype,{external:!0,name:"ab",cb:function(){return"["+S(this)+"]"}}),d.set(Uint8Array.prototype,{external:!0,name:"u8",cb:function(){return"["+S(this.buffer)+"]"}}),d.set(Uint8ClampedArray.prototype,{external:!0,name:"uc8",cb:function(){return"["+S(this.buffer)+"]"}}),d.set(Int8Array.prototype,{external:!0,name:"s8",cb:function(){return"["+S(this.buffer)+"]"}}),d.set(Uint16Array.prototype,{external:!0,name:"u16",cb:function(){return"["+S(this.buffer)+"]"}}),d.set(Int16Array.prototype,{external:!0,name:"s16",cb:function(){return"["+S(this.buffer)+"]"}}),d.set(Uint32Array.prototype,{external:!0,name:"u32",cb:function(){return"["+S(this.buffer)+"]"}}),d.set(Int32Array.prototype,{external:!0,name:"s32",cb:function(){return"["+S(this.buffer)+"]"}}),d.set(Float32Array.prototype,{external:!0,name:"f32",cb:function(){return"["+S(this.buffer)+"]"}}),d.set(Float64Array.prototype,{external:!0,name:"f64",cb:function(){return"["+S(this.buffer)+"]"}}),d.set(Float64Array.prototype,{external:!0,name:"f64",cb:function(){return"["+S(this.buffer)+"]"}}),d.set(Map.prototype,i={external:!0,name:"map",cb:null}),v.set("map",{protoCon:Map,cb:function(e,t){if(!e)return this;this.set(e,t)}}),d.set(Array.prototype,a={external:!1,name:Array.prototype.constructor.name,cb:null}),n.defineClass=function(e,t){for(var n,r=Object.keys(t),s=1;s<r.length;s++){var a,i;(a=r[s-1])>(i=r[s])&&(r[s-1]=i,r[s]=a,s?s-=2:s--)}k.push(n={name:e,tag:r.toString(),proto:Object.getPrototypeOf(t),fields:Object.keys(t)});for(var o=1;o<n.fields.length;o++)if(n.fields[o]<n.fields[o-1]){let e=n.fields[o-1];n.fields[o-1]=n.fields[o],n.fields[o]=e,o>1&&(o-=2)}n.proto===Object.getPrototypeOf({})&&(n.proto=null)},n.toJSOX=n.registerToJSOX=function(e,t,n){if(t.prototype&&t.prototype===Object.prototype){var r=Object.keys(t).toString();if(m.get(r))throw new Error("Existing toJSOX has been registered for object type");m.set(r,{external:!0,name:e,cb:n})}else{if(d.get(t.prototype))throw new Error("Existing toJSOX has been registered for prototype");d.set(t.prototype,{external:!0,name:e||n.constructor.name,cb:n})}},n.fromJSOX=function(e,t,n){if(t||(t=function(){}.prototype),v.get(e))throw new Error("Existing fromJSOX has been registered for prototype");if(t&&!("constructor"in t))throw new Error("Please pass a prototype like thing...");v.set(e,{protoCon:t.prototype.constructor,cb:n})},n.registerFromJSOX=function(e,t){throw new Error("deprecated; please adjust code to use fromJSOX:"+e+t.toString())},n.addType=function(e,t,r,s){n.toJSOX(e,t,r),n.fromJSOX(e,t,s)},n.registerToFrom=function(e,t){throw new Error("registerToFrom deprecated; please use addType:"+e+t.toString())},n.stringifier=function(){var e=[],r='"';let s=new WeakMap;const o=[];var l=[];const c=new WeakMap,u=new Map;let p=null;const g=[];let h=!1;const b={defineClass(t,n){for(var r,s=Object.keys(n),a=1;a<s.length;a++){var i,o;(i=s[a-1])>(o=s[a])&&(s[a-1]=o,s[a]=i,a?a-=2:a--)}e.push(r={name:t,tag:s.toString(),proto:Object.getPrototypeOf(n),fields:Object.keys(n)});for(var l=1;l<r.fields.length;l++)if(r.fields[l]<r.fields[l-1]){let e=r.fields[l-1];r.fields[l-1]=r.fields[l],r.fields[l]=e,l>1&&(l-=2)}r.proto===Object.getPrototypeOf({})&&(r.proto=null)},setDefaultObjectToJSOX(e){p=e},isEncoding:e=>!!l.find(((t,n)=>t===e&&n<l.length-1)),encodeObject(e){return p?p.apply(e,[this]):e},stringify:(t,w,_)=>function(t,w,_){if(void 0===t)return"undefined";if(null===t)return;var x,O,N,j,S=!0;const E=typeof _,A=typeof w;if(x="",O="","number"===E)for(j=0;j<_;j+=1)O+=" ";else"string"===E&&(O=_);if(N=w,w&&"function"!==A&&("object"!==A||"number"!=typeof w.length))throw new Error("JSOX.stringify");o.length=0,s=new WeakMap;const I=D("",{"":t});return k.length=0,I;function T(e){return isNaN(e)?e in f||/([0-9-])/.test(e[0])||/((\n|\r|\t)|[ {}()<>!+*/.:,-])/.test(e)?r+n.escape(e)+r:e:["'",e.toString(),"'"].join("")}function D(t,n){function r(){var e=[];let t=o.length;for(let n=0;n<this.length;n+=1)o[t]=n,e[n]=D(n,this)||"null";return o.length=t,l.length=t,0===e.length?"[]":x?["[\n",x,e.join(",\n"+x),"\n",I,"]"].join(""):"["+e.join(",")+"]"}function s(){var e={tmp:null},t="{",n=!0;for(var[r,s]of this){e.tmp=s;var a=o.length;o[a]=r,t+=(n?"":",")+T(r)+":"+D("tmp",e),o.length=a,n=!1}return t+="}"}var f,w,_,j;S&&(a.cb=r,i.cb=s,S=!1);var E,A,I=x;let P,C=o.length,M=n[t],X="object"==typeof M;X&&null!==M&&p&&(g.find((e=>e===M))||(g.push(M),l[C]=M,M=p.apply(M,[b]),X="object"==typeof M,g.pop(),l.length=C,X="object"==typeof M));const J=null!=M&&Object.getPrototypeOf(M);var F=J&&(c.get(J)||d.get(J)||null),U=!F&&null!=M&&(u.get(Object.keys(M).toString())||m.get(Object.keys(M).toString())||null);if(F)var $=F&&F.cb||U&&U.cb;if(null!=M&&"function"==typeof $){if(x+=O,"object"==typeof M&&(_=y(M)))return"ref"+_;let e=$.call(M,b);M=e,x=I}else if("object"==typeof M&&(_=y(M)))return"ref"+_;switch("function"==typeof N&&(M=N.call(n,t,M)),typeof M){case"bigint":return M+"n";case"string":case"number":{let n="";return""===t&&(n=e.map((e=>e.name+"{"+e.fields.join(",")+"}")).join(x?"\n":"")+k.map((e=>e.name+"{"+e.fields.join(",")+"}")).join(x?"\n":"")+(x?"\n":"")),F&&F.external?n+F.name+M:U&&U.external?n+U.name+M:n+M}case"boolean":case"null":return String(M);case"object":if(_)return"ref"+_;if(!M)return"null";if(x+=O,E=null,A=[],N&&"object"==typeof N){for(j=N.length,E=v(M,N),f=0;f<j;f+=1)"string"==typeof N[f]&&(w=N[f],o[C]=w,(_=D(w,M))&&(E?A.push(_):A.push(T(w)+(x?": ":":")+_)));o.splice(C,1)}else{E=v(M);var B=[];for(w in M)if((!h||Object.prototype.propertyIsEnumerable.call(M,w))&&Object.prototype.hasOwnProperty.call(M,w)){var q;for(q=0;q<B.length;q++)if(B[q]>w){B.splice(q,0,w);break}q==B.length&&B.push(w)}for(q=0;q<B.length;q++)w=B[q],Object.prototype.hasOwnProperty.call(M,w)&&(o[C]=w,(_=D(w,M))&&(E?A.push(_):A.push(T(w)+(x?": ":":")+_)));o.splice(C,1)}P=""===t?(e.map((e=>e.name+"{"+e.fields.join(",")+"}")).join(x?"\n":"")||k.map((e=>e.name+"{"+e.fields.join(",")+"}")).join(x?"\n":""))+(x?"\n":""):"",F&&F.external&&(P+=T(F.name));var z=null;return E&&(z=T(E.name)),_=P+(0===A.length?"{}":x?(E?z:"")+"{\n"+x+A.join(",\n"+x)+"\n"+I+"}":(E?z:"")+"{"+A.join(",")+"}"),x=I,_}}}(t,w,_),setQuote(e){r=e},registerToJSOX(e,t,n){return this.toJSOX(e,t,n)},toJSOX(e,t,n){if(t.prototype&&t.prototype!==Object.prototype){if(c.get(t.prototype))throw new Error("Existing toJSOX has been registered for prototype");c.set(t.prototype,{external:!0,name:e||n.constructor.name,cb:n})}else{var r=Object.keys(t).toString();if(u.get(r))throw new Error("Existing toJSOX has been registered for object type");u.set(r,{external:!0,name:e,cb:n})}},get ignoreNonEnumerable(){return h},set ignoreNonEnumerable(e){h=e}};return b;function y(e){if(null!==e){var n=s.get(e);if(n)return n;s.set(e,t.stringify(o))}}function v(t,n){var r,s,a=Object.getPrototypeOf(t);if(s=e.find((e=>{if(e.proto&&e.proto===a)return!0})))return s;if(e.length||k.length){if(n)n=n.map((e=>"string"==typeof e?e:void 0)),r=n.toString();else{for(var i=Object.keys(t),o=1;o<i.length;o++){var l,c;(l=i[o-1])>(c=i[o])&&(i[o-1]=c,i[o]=l,o?o-=2:o--)}r=i.toString()}(s=e.find((e=>{if(e.tag===r)return!0})))||(s=k.find((e=>{if(e.tag===r)return!0})))}return s}};const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N={"~":-1,"=":-1,$:62,_:63,"+":62,"-":62,".":62,"/":63,",":63};for(var j=0;j<256;j++)j<64&&(N[O[j]]=j);function S(e){for(var t,n="",r=new Uint8Array(e),s=r.byteLength,a=s%3,i=s-a,o=0;o<i;o+=3)t=r[o]<<16|r[o+1]<<8|r[o+2],n+=O[(16515072&t)>>18]+O[(258048&t)>>12]+O[(4032&t)>>6]+O[63&t];return 1==a?(t=r[i],n+=O[(252&t)>>2]+O[(3&t)<<4]+"=="):2==a&&(t=r[i]<<8|r[i+1],n+=O[(64512&t)>>10]+O[(1008&t)>>4]+O[(15&t)<<2]+"="),n}function E(e){var t;t=e.length%4==1?3*((e.length+3)/4|0)-3:e.length%4==2?3*((e.length+3)/4|0)-2:e.length%4==3?3*((e.length+3)/4|0)-1:-1==N[e[e.length-3]]?3*((e.length+3)/4|0)-3:-1==N[e[e.length-2]]?3*((e.length+3)/4|0)-2:-1==N[e[e.length-1]]?3*((e.length+3)/4|0)-1:3*((e.length+3)/4|0);var n,r=new ArrayBuffer(t),s=new Uint8Array(r),a=e.length+3>>2;for(n=0;n<a;n++){var i=N[e[4*n]],o=4*n+1<e.length?N[e[4*n+1]]:-1,l=o>=0&&4*n+2<e.length?N[e[4*n+2]]:-1,c=l>=0&&4*n+3<e.length?N[e[4*n+3]]:-1;o>=0&&(s[3*n+0]=i<<2|o>>4),l>=0&&(s[3*n+1]=o<<4|l>>2&15),c>=0&&(s[3*n+2]=l<<6|63&c)}return r}Object.freeze(N),n.stringify=function(e,t,r){return n.stringifier().stringify(e,t,r)},[[0,256,[16767487,16739071,130048,3670016,0,16777208,16777215,8388607]]].map((e=>({firstChar:e[0],lastChar:e[1],bits:e[2]})))}();var s=r(Object.freeze({__proto__:null}));export default s;
